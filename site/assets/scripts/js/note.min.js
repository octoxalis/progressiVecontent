
var NOTE_o={text__v(e){const t=e.target.closest("INS");t&&(NOTE_o.image__v(t),t.querySelector('[data-id="note_content"]').classList.toggle("note_open"))},image__v(e){const t=LIB_o.data__o("isrc",e);if(!t||!t.dataset.isrc)return;const o=t.dataset.isize;if(o){const[e,n]=o.split(" ");if(!e)return;let c=`width:${e}${(""+parseInt(e)).length===e.length?"px":""};`;if(n){c+=` height:${n}${(""+parseInt(n)).length===n.length?"px":""};`}c&&(t.style=c)}const n=t.dataset.isrc;t.src=n,t.removeAttribute("data-isrc");const c=e.querySelector('[data-id="note_content"] > img'),s=c.dataset.isrc;s&&(c.src=s)},unfold__v(e){const t=e.nextElementSibling;if(!t)return;let o=LIB_o.id__o("img_unfold",e);if(!o){for(child_e of(o=document.createElement("i"),o.dataset.id="img_unfold",t.children))if(!child_e.classList.contains("note_link_a")){const e=child_e.cloneNode(!0);o.appendChild(e),"IMG"===child_e.tagName&&(e.src=child_e.dataset.isrc||child_e.dataset.isrc,e.removeAttribute("data-isrc"))}e.appendChild(o)}},act_o:{color__v:(e,t="gray",o="color")=>{const n=e.closest(".note_open");if(!n)return;const c=n.querySelector("img");let s=c.src;if(!s.includes(t))return;s=s.replace(t,o),c.src=s,e.classList.add("unseen"),e.onclick=()=>!1;const i=LIB_o.id__o("img_unfold",n.parentNode);i&&(i.querySelector("img").src=s,n.classList.remove("note_open"))}},renew__v(e){const t=document.querySelector(`section[data-doc_n="${e}"]`);t.addEventListener("click",NOTE_o.text__v);const o=t.querySelectorAll('button[aria-label="unfold image"]');for(const e of o)e.addEventListener("mouseover",(()=>NOTE_o.unfold__v(e)));const n=t.querySelectorAll('a[class="note_link"]');for(const e of n)e.addEventListener("click",(()=>NOTE_o.act_o[""+e.dataset.method](e,""+e.dataset.param))),e.addEventListener("keydown",(()=>e.click()));console.log("note.js")}};