class Slider3D{static default_o={slideList_s:"slide_list",slideFocus_s:"slide_focus",slideTitle_s:"slide_title",step_s:"step",stepList_s:"step_list",stepFocus_s:"step_focus",scroll_s:"scroll",slideListTag_s:"nav",slideTag_s:"dl",titleTag_s:"dt",stepListTag_s:"nav",stepTag_s:"button",stepBefore_b:!1,hyphen_s:"-",slot_s:"slot_s",clip_b:!1,wide_b:!1,step_a:null,cycle_f:null,padding_n:0,shift_n:0,perspective_n:30,translateWidth_n:.5,translateHeight_n:0,zoom_n:-50,opac_n:.05,transition_n:100,tick_n:60};constructor(t,s,i={}){this.container_e=t,this.sectionList_e=s,this.option_o=Object.assign({},Slider3D.default_o,i),this.sectionList=null,this.slide_e=null,this.step_e=null,this.slide_a=[],this.step_a=[],this.slide_n=0,this.atStep_n=0,this.listener_b=!1,this.pressed_b=!1,this.scroll_b=!1,this.dragX_b=!1,this.dragY_b=!1,this.coords_o={atX_n:0,atY_n:0},this.amplitude_n=0,this.center_n=0,this.lastCenter_n=0,this.offset_n=0,this.frame_n=0,this.target_n=0,this.timeout_n=0,this.ticker_n=0,this.stamp_n=0,this.velocity_n=0,this.init__v()}init__v=()=>{["slide","step","fill","geometry","refresh","listen"].forEach((t=>this[t+"__v"]()))};slide__v=()=>{this.slideContainer=document.createElement(this.option_o.slideListTag_s),this.slideContainer.dataset[this.option_o.hyphen_s]=this.option_o.slideList_s,this.slideContainer.setAttribute("class",this.option_o.slideList_s),this.container_e.prepend(this.slideContainer)};step__v=()=>{this.stepContainer=document.createElement(this.option_o.stepListTag_s),this.stepContainer.className=this.option_o.stepList_s;const t=this.option_o.stepBefore_b?"prepend":"append";this.container_e[t](this.stepContainer)};fill__v=()=>{[...this.sectionList_e.children].forEach(((t,s)=>{this.addStep__v(t,s),this.addSlide__v(t,s)}))};geometry__v=()=>{this.size__v(),this.perspective__v()};add__v=(t,s=0,i=null,e=null)=>{const _=s||this.slide_n;this.addSlide__v(t,_,i),this.addStep__v(t,_),this.geometry__v(),this.refresh__v(),e&&e()};addSlide__v=(t,s,i=null)=>{const e=document.createElement(this.option_o.slideTag_s);if(e.dataset[this.option_o.step_s]=s,e.innerHTML=`<${this.option_o.titleTag_s} class="${this.option_o.slideTitle_s}">${t.dataset[this.option_o.slot_s]}</${this.option_o.titleTag_s}>`,i)for(const t of i){const[s,i]=t.split("=");e.setAttribute(s,i)}this.slideContainer.appendChild(e),this.slide_a.push(e),this.slide_n=this.slide_a.length};addStep__v=(t,s)=>{const i=document.createElement(this.option_o.stepTag_s);i.dataset[this.option_o.step_s]=s;const e=t.dataset[this.option_o.slot_s];i.setAttribute("title",e),0===s&&(this.step_e=i,i.classList.add(this.option_o.stepFocus_s)),i.addEventListener("click",(t=>this.toCurrent__v(s))),this.stepContainer.appendChild(i),this.step_a.push(i)};capacity__n=()=>this.slide_a.length;size__v=()=>{if(!this.slide_a.length)return;const t=this.slide_a[0];this.dimension__v(t.offsetHeight+"px",t.offsetWidth+"px")};dimension__v=(t="100px",s="100px")=>{this.dimension_o={width_n:parseInt(s),height_n:parseInt(t)},this.size_n=2*this.dimension_o.width_n+this.option_o.padding_n};perspective__v=()=>{this.slideContainer.style.perspective=this.option_o.wide_b?"none":this.dimension_o.height_n*this.option_o.perspective_n+"px"};position__n=(t,s)=>{let i=t["client"+s];return t.targetTouches&&t.targetTouches.length>=1&&(i=t.targetTouches[0]["client"+s]),i};clip__n=t=>{const s=this.slide_n;return t>=s?t%s:t<0?this.clip__n(s+t%s):t};closest__o=t=>{if(t.dataset[this.option_o.step_s])return t;let s=null;for(;t;){if(s=t.parentElement,s&&s.dataset[this.option_o.step_s])return s;t=s}return s};current__n=t=>{const s=t.dataset[this.option_o.step_s],i=this.slide_a.find((t=>t.dataset[this.option_o.step_s]===s));return i?i.dataset[this.option_o.step_s]:"0"};atStep__v=()=>{this.step_e!==this.step_a[this.atStep_n]&&(this.step_e.classList.remove(this.option_o.stepFocus_s),this.step_e=this.step_a[this.atStep_n],this.step_e.classList.add(this.option_o.stepFocus_s),this.step_e.focus())};atStep__n=()=>this.atStep_n;nearest__v=t=>{this.listener_b&&(this.target_n=this.size_n*Math.round(this.offset_n/this.size_n)+this.size_n*t,this.offset_n!==this.target_n&&(this.amplitude_n=this.target_n-this.offset_n,this.stamp_n=performance.now(),requestAnimationFrame(this.frame__v)))};toCurrent__v=t=>this.cycle__v(t);toNearest__v=t=>{const s=this.atStep_n+t;(!this.option_o.clip_b||this.option_o.clip_b&&s>=0)&&this.cycle__v(s)};toSlide__v=t=>{t.classList.contains(this.option_o.slideFocus_s)||(null!==this.slide_e&&this.slide_e.classList.remove(this.option_o.slideFocus_s),this.slide_e=t,this.atStep_n=this.current__n(t),this.slide_e.classList.contains(this.option_o.slideFocus_s)||this.slide_e.classList.add(this.option_o.slideFocus_s)),this.atStep__v()};cycle__v=t=>{let s=this.center_n%this.slide_n-t;return this.option_o.clip_b||(s<0&&Math.abs(s+this.slide_n)<Math.abs(s)?s+=this.slide_n:s>0&&Math.abs(s-this.slide_n)<s&&(s-=this.slide_n)),this.nearest__v(-s)};listen__v=(t=!1)=>{let s=(t?"remove":"add")+"EventListener";void 0!==window.ontouchstart&&(this.container_e[s]("touchstart",this.tap__v),this.container_e[s]("touchmove",this.drag__v),this.container_e[s]("touchend",this.release__v)),this.container_e[s]("click",this.click__v),this.container_e[s]("mousedown",this.tap__v),this.container_e[s]("mousemove",this.drag__v),this.container_e[s]("mouseup",this.release__v),this.container_e[s]("mouseleave",this.release__v),window[s]("resize",this.resize__v),this.listener_b=!1===t};click__v=t=>{if(!this.listener_b)return;if(t.target.closest(`${this.option_o.slideTag_s}[data-${this.option_o.step_s}]`))if(this.dragY_b)t.stopPropagation();else if(!this.option_o.wide_b){const s=this.closest__o(t.target);if(!s)return;const i=this.current__n(s);0!==this.center_n%this.slide_n-i&&t.stopPropagation(),this.cycle__v(i)}};tap__v=t=>{this.listener_b&&(this.pressed_b=!0,this.dragX_b=!1,this.dragY_b=!1,this.velocity_n=0,this.amplitude_n=0,this.frame_n=this.offset_n,this.stamp_n=performance.now(),this.coords_o={atX_n:this.position__n(t,"X"),atY_n:this.position__n(t,"Y")},clearInterval(this.ticker_n),this.ticker_n=setInterval(this.track__v,this.tick_n))};drag__v=t=>{if(this.listener_b&&!t.target.classList.contains(this.slideFocus_s)){if(this.pressed_b){const s=this.position__n(t,"X"),i=this.position__n(t,"Y"),e=this.coords_o.atX_n-s;if(Math.abs(this.coords_o.atY_n-i)<30&&!this.dragX_b)(e>2||e<-2)&&(this.dragY_b=!0,this.coords_o.atX_n=s,this.scroll__v(this.offset_n+e));else{if(this.dragY_b)return void t.stopPropagation();this.dragX_b=!0}}this.dragY_b&&t.stopPropagation()}};release__v=t=>{this.pressed_b&&(this.pressed_b=!1,clearInterval(this.ticker_n),this.target_n=this.offset_n,(this.velocity_n>10||this.velocity_n<-10)&&(this.amplitude_n=.9*this.velocity_n,this.target_n=this.offset_n+this.amplitude_n),this.target_n=Math.round(this.target_n/this.size_n)*this.size_n,this.option_o.clip_b&&(this.target_n>=this.size_n*(this.slide_n-1)?this.target_n=this.size_n*(this.slide_n-1):this.target_n<0&&(this.target_n=0)),this.amplitude_n=this.target_n-this.offset_n,this.stamp_n=performance.now(),requestAnimationFrame(this.frame__v),this.dragY_b&&t.stopPropagation())};resize__v=()=>{if(this.listener_b){if(this.option_o.wide_b)return this.size__v(),this.offset_n=2*this.center_n*this.dimension_o.height_n,void(this.target_n=this.offset_n);this.geometry__v(),this.scroll__v()}};track__v=()=>{let t=performance.now(),s=t-this.stamp_n;this.stamp_n=t;let i=this.offset_n-this.frame_n;this.frame_n=this.offset_n;const e=1e3*i/(1+s);this.velocity_n=.8*e+.2*this.velocity_n};translate__v=(t,s,i,e,_,n=null)=>{let o=e,h=0;if(!this.option_o.wide_b){o+=(this.container_e.clientWidth-this.dimension_o.width_n)*this.option_o.translateWidth_n,h+=(this.container_e.clientHeight-this.dimension_o.height_n)*this.option_o.translateHeight_n}null!==n&&(o+=n),t.style.transform=`translate3d( ${o}px, ${h}px, ${_}px )`,t.style.zIndex=s,t.style.opacity=i};scroll__v=(t=0)=>{let s,i,e,_=0;this.timeout__v(),this.lastCenter_n=this.center_n,this.offset_n="number"==typeof t?t:this.offset_n,this.center_n=Math.floor((this.offset_n+.5*this.size_n)/this.size_n);const n=this.offset_n-this.center_n*this.size_n,o=n<0?1:-1,h=-o*n*2/this.size_n,a=this.slide_n>>1;for((!this.option_o.clip_b||this.center_n>=0&&this.center_n<this.slide_n)&&(s=this.slide_a[this.clip__n(this.center_n)],this.toSlide__v(s),this.translate__v(s,0,this.option_o.wide_b?1:1-this.option_o.opac_n*h,-n>>1,this.option_o.zoom_n*h,o*this.option_o.shift_n*h*_)),_=1;_<=a;++_)this.option_o.wide_b?(e=this.option_o.zoom_n,i=_===a&&n>0?1-h:1):(e=this.option_o.zoom_n*(2*_-h*o),i=1-this.option_o.opac_n*(2*_-h*o)),(!this.option_o.clip_b||this.center_n-_>=0)&&(s=this.slide_a[this.clip__n(this.center_n-_)],this.translate__v(s,-_,i,-this.option_o.shift_n+(-this.size_n*_-n>>1),e)),this.option_o.wide_b?(e=this.option_o.zoom_n,i=_===a&&n<0?1-h:1):(e=this.option_o.zoom_n*(2*_+h*o),i=1-this.option_o.opac_n*(2*_+h*o)),(!this.option_o.clip_b||this.center_n+_<this.slide_n)&&(s=this.slide_a[this.clip__n(this.center_n+_)],this.translate__v(s,-_,i,this.option_o.shift_n+.5*(this.size_n*_-n),e));this.lastCenter_n!==this.center_n&&"function"==typeof this.option_o.cycle_f&&this.option_o.cycle_f.call(this,this.slide_e,this.dragY_b)};timeout__v=()=>{this.scroll_b=!0,this.container_e.classList.contains(this.option_o.scroll_s)&&this.container_e.classList.add(this.option_o.scroll_s),0!==this.timeout_n&&window.clearTimeout(this.timeout_n),this.timeout_n=window.setTimeout((()=>{this.scroll_b=!1,this.container_e.classList.remove(this.option_o.scroll_s)}),this.option_o.transition_n)};frame__v=()=>{if(!this.amplitude_n)return;const t=performance.now()-this.stamp_n,s=this.amplitude_n*Math.exp(-t/this.option_o.transition_n);if(s>2||s<-2)return this.scroll__v(this.target_n-s),void requestAnimationFrame(this.frame__v);this.scroll__v(this.target_n)};refresh__v=()=>{requestAnimationFrame(this.frame__v),this.resize__v(),this.scroll__v()};wide__v=(t=!1,s=200,i=null)=>{let e=null===i?this.dimension_o.height_s+"px":i+"px",_=t?"100%":s+"px";this.option_o.wide_b=t,this.dimension__v(e,_),this.perspective__v(),this.refresh__v()};detach__v=()=>{this.listen__v(!0)}}var SLI_o={slider_e:null,slider__n(){SLI_o.slider_e=LIB_o.nodeId__o("sections_slider");const t=LIB_o.nodeId__o("sections");SLI_o.slider_c=new Slider3D(SLI_o.slider_e,t);const s=document.querySelector('nav[data--="slide_list"] > dl[data-step="0"]');return LIB_o.attribute__v(s,[["data-section","0"],["data-slot_s","contents"]]),SLI_o.slider_c.capacity__n()},loaded__b:t=>null!==document.querySelector(`section[data-slot_s="${t}"]`),section__v(t){const s=t.target.closest("[data-step]");if(s){const t=s.dataset.step,i=document.querySelector(`dl[data-section][data-step="${t}"]`).dataset.slot_s;SLI_o.location__v(i)}},location__v(t){document.querySelector(`section[data-slot_s="${t}"]`).scrollIntoView({behavior:"smooth",block:"start"})},listen__v(){SLI_o.slider_e.addEventListener("click",SLI_o.section__v)}};LIB_o.rootVar__v("--SECTIONS_CAP",SLI_o.slider__n()),SLI_o.listen__v(),SER_o.send__v("RESTORE",null);