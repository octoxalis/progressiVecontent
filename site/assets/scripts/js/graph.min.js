var PAN_o={gapX_n:0,gapY_n:0,offsetX_n:0,offsetY_n:0,x_n:0,y_n:0,move_b:!1,scale_n:1,ratio_n:-.01,minScale_n:.1,maxScale_n:10,panMove_n:10,zoomScale_n:10,init__v(_,o,e={}){PAN_o.target_e=document.querySelector(_),PAN_o.target__v(o),e.zoom_b&&PAN_o.listenZoom__v(),e.pan_b&&PAN_o.listenPan__v()},target__v(_){PAN_o.target_e.width=PAN_o.width_n=_[0],PAN_o.target_e.height=PAN_o.height_n=_[1],PAN_o.minX_n=_[2]||_[0],PAN_o.minY_n=_[3]||_[1],PAN_o.viewbox__v(0,0,PAN_o.width_n,PAN_o.height_n)},viewbox__v(_,o,e,n){PAN_o.target_e.setAttribute("viewBox",`${_} ${o} ${e} ${n}`)},viewbox__a:()=>PAN_o.target_e.getAttribute("viewBox").split(" "),listenZoom__v(){["wheel","touchstart","keydown"].forEach((_=>PAN_o.listen__v(_,"Zoom")))},wheelZoom__v(_){PAN_o.viewbox__v(...PAN_o.scale__a(_.deltaY<0?PAN_o.zoomScale_n:-PAN_o.zoomScale_n))},touchstartZoom__v(_){_.touches.length<2?PAN_o.touchstartStart__v(_):PAN_o.viewbox__v(...PAN_o.scale__a(_.touches.length>2?PAN_o.zoomScale_n:-PAN_o.zoomScale_n))},keydownZoom__v:_=>{const o=_.keyCode;107!==o&&109!==o||PAN_o.viewbox__v(...PAN_o.scale__a(109===o?-PAN_o.zoomScale_n:107===o?PAN_o.zoomScale_n:0))},listenPan__v(){["mousedown","keydown"].forEach((_=>PAN_o.listen__v(_,"Start")))},mousedownStart__v:_=>PAN_o.panStart__v(...PAN_o.client__a(_),...PAN_o.handle__a(_)),touchstartStart__v(_){_.touches.length<2&&PAN_o.panStart__v(...PAN_o.client__a(_),...PAN_o.handle__a(_))},keydownStart__v(_){const o=_.keyCode;PAN_o.move_b&&o>=37&&o<=40?PAN_o.panMove__v(_):32!==o?13!==o||PAN_o.panStop__v(_):PAN_o.panStart__v(...PAN_o.client__a(_),...PAN_o.handle__a(_))},panStart__v(_,o,e,n){PAN_o.move_b=!0;const[t,a]=PAN_o.viewbox__a();PAN_o.gapX_n=_-PAN_o.offsetX_n,PAN_o.gapY_n=o-PAN_o.offsetY_n,PAN_o.gapX_n=_- -t,PAN_o.gapY_n=o- -a,PAN_o.target_e.addEventListener(e,PAN_o.panMove__v,!1),PAN_o.target_e.addEventListener(n,PAN_o.panStop__v,!1)},panMove__v(_){if(PAN_o.move_b){const[o,e]=PAN_o.client__a(_);PAN_o.x_n=o-PAN_o.gapX_n,PAN_o.y_n=e-PAN_o.gapY_n,PAN_o.offsetX_n=PAN_o.x_n,PAN_o.offsetY_n=PAN_o.y_n;const[n,t,a,s]=PAN_o.viewbox__a();PAN_o.viewbox__v(""+-PAN_o.x_n,""+-PAN_o.y_n,a,s)}},panStop__v(_){PAN_o.move_b=!1;const[o,e]=PAN_o.handle__a(_);PAN_o.target_e.removeEventListener(o,PAN_o.panMove__v,!1),PAN_o.target_e.removeEventListener(e,PAN_o.panStop__v,!1)},scale__a(_){PAN_o.scale_n=Math.min(Math.max(PAN_o.minScale_n,PAN_o.scale_n+_*PAN_o.ratio_n),PAN_o.maxScale_n);const o=Math.round(PAN_o.scale_n*PAN_o.width_n),e=Math.round(PAN_o.scale_n*PAN_o.height_n),[n,t]=PAN_o.viewbox__a();return[n,t,""+o,""+e]},client__a(_){if(void 0!==_.clientX)return[_.clientX,_.clientY];if(void 0!==_.changedTouches)return[_.changedTouches[0].clientX,_.changedTouches[0].clientY];if(_.keyCode){const o=_.keyCode,e=37===o?-PAN_o.panMove_n:39===o?PAN_o.panMove_n:0,n=38===o?-PAN_o.panMove_n:40===_.keyCode?PAN_o.panMove_n:0;return[e+PAN_o.x_n,n+PAN_o.y_n]}return[0,0]},listen__v(_,o){("keydown"===_?document:PAN_o.target_e).addEventListener(_,(e=>{e.preventDefault(),PAN_o[`${_}${o}__v`](e)}))},handle__a:_=>void 0!==_.clientX?["mousemove","mouseup"]:void 0!==_.changedTouches?["touchmove","touchend"]:["keydown","keydown"]},SET_o={disjoint__a(_,o){const e=[new Set,new Set];return _.forEach((_=>{o.has(_)||e[0].add(_)})),o.forEach((o=>{_.has(o)||e[1].add(o)})),e}},GRA_o={graph_c:null,dim_n:24,gap_n:2,minDim_n:16,maxDim_n:32,node_s:"node_",slider_e:null,svg_e:null,selected_a:new Set,async fetch__v(_){let o=await fetch(_);if(!o.ok)return void alert('"HTTP-Error: '+o.status);//!!! TODO: better alert
return await o.json()},nodes__v(_){if(_.target.closest("[data-step]").classList.contains("slide_focus")){LIB_o.invisible__v(GRA_o.svg_e);const _=GRA_o.slider.atStep__n(),o=LIB_o.nodeId__o("labels_docs").querySelector(`li[data-slot_n="${_}"]`),e=new Set(o.dataset["-"].split(" "));SET_o.disjoint__a(GRA_o.selected_a,e).forEach((_=>GRA_o.toggle__v(_))),GRA_o.selected_a=e}},toggle__v(_){_.forEach((_=>{const o=GRA_o.svg_e.querySelector(`rect:nth-child(${_})`);o&&o.classList.toggle("node_selected")}))},nodeOpen__v(_){const o=_.target;GRA_o.node__v(o,o.classList.contains("node_selected")),LIB_o.nodeId__o("node_display").classList.toggle("unseen");const e=GRA_o.svg_e.querySelector(".node_focus");e&&e.classList.remove("node_focus"),o.classList.add("node_focus")},nodeClose__v(){LIB_o.nodeId__o("node_display").classList.toggle("unseen")},sectionSlider__v(){SLI_o.slider_c.cycle__v(SLI_o.slider_c.capacity__n()-1)},nodeLink__v(){const _=GRA_o.nodeStep__s(),o=GRA_o.nodeSlot__s(_);document.querySelector(`section[data-slot_n="${_}"]`)||IND_o.load__v("slots",o,+_,(o=>{SLI_o.slider_c.add__v(o,0,["data-section="+_,"data-slot_s="+o.dataset.slot_s],(()=>{GRA_o.sectionSlider__v(),LIB_o.rootVar__v("--SECTIONS_CAP",SLI_o.slider_c.capacity__n())}))}))},nodeStep__s:()=>LIB_o.nodeId__o("node_link").getAttribute("data-slot_s").slice("node_".length),nodeSlot__s:_=>LIB_o.nodeId__o("docs_labels").querySelector(`li[data-slot_n="${_}"]`).dataset.slot_s,node__v(_,o){const e=+_.id.slice(GRA_o.node_s.length),n=LIB_o.nodeId__o("docs_labels").querySelector(`li[data-slot_n="${e}"]`);if(!n)return;LIB_o.nodeId__o("node_link").setAttribute("data-slot_s",_.id),LIB_o.nodeId__o("node_document").innerHTML=n.dataset.slot_s.replace("_"," ");const t=n.dataset["-"];let a="";for(let _ of t.split(" "))a+='<li class="truncate">'+_;LIB_o.nodeId__o("node_labels").innerHTML=`<ul>${a}</ul>`;const s=o?"NODE_BACK_SELECTED":"NODE_BACK_NOT_SELECTED";LIB_o.rootVar__v("--NODE_BACK",LIB_o.rootVar__s("--"+s))},skin__v(){LIB_o.nodeId__o("section_skin")||IND_o.load__v(path_s="sys",slot_s="skin",slot_n=-2,callback_f=null)},bookmark__v(){LIB_o.nodeId__o("section_bookmark")||IND_o.load__v(path_s="sys",slot_s="bookmark",slot_n=-3,callback_f=null)},listen__v(){GRA_o.slider_e.addEventListener("click",GRA_o.nodes__v),GRA_o.svg_e.addEventListener("click",GRA_o.nodeOpen__v),LIB_o.nodeId__o("node_display").addEventListener("click",GRA_o.nodeClose__v),LIB_o.nodeId__o("node_link").addEventListener("click",GRA_o.nodeLink__v),LIB_o.nodeId__o("skin_link").addEventListener("click",(_=>{GRA_o.skin__v()})),LIB_o.nodeId__o("bookmark_link").addEventListener("click",(_=>{GRA_o.bookmark__v()}))}};!async function(){GRA_o.svg_e=LIB_o.nodeId__o("graph_svg"),GRA_o.slider_e=LIB_o.nodeId__o("graph_slider");const _=LIB_o.nodeId__o("labels_docs");GRA_o.slider=new Slider3D(GRA_o.slider_e,_),LIB_o.rootVar__v("--LABELS_CAP",_.children.length),GRA_o.listen__v()}();