
var BOOK_o={init__v(){BOOK_o.cache__v(),BOOK_o.history__v(),BOOK_o.dragDrop(document.querySelectorAll("#bookmark_history_list > li")),BOOK_o.listen__v()},cache__v(){SER_o.CACHE__v({sender_o:BOOK_o,recipient_s:"SWO_o"})},CACHE__v(e){BOOK_o.list__v(Array.from(e)),BOOK_o.dragDrop(document.querySelectorAll("#bookmark_content_list > li"))},list__v(e){let t="";e.forEach((e=>{const o=e.slice("/slots/".length,-".html".length);t+=`<li draggable="true">${o}</li>`})),document.querySelector("#bookmark_content_list").innerHTML=t},history__v(){const e=JSON.parse(window.localStorage.getItem("bookmark_content_list"));if(e){let t="";e.forEach((e=>{let o=e.list_a[0].slice("/slots/".length,-".html".length);o+=" ... ",o+=e.list_a[e.list_a.length-1].slice("/slots/".length,-".html".length);const r=`<dl><dt>${e.name_s}</dt><dd>${o}</dd><dd>${e.date_s}</dd></dl>`;t+=`<li draggable="true">${r}</li>`})),document.querySelector("#bookmark_history_list").innerHTML=t}},save__v(){const e=new Set;document.querySelectorAll("#bookmark_content_list > li").forEach((t=>{e.add(`/slots/${t.textContent}.html`)})),SER_o.CACHE__v({recipient_s:"SWO_o",cache_a:e}),BOOK_o.add__v(Array.from(e))},add__v(e){const t=document.querySelector("#bookmark_name").value.replace(/[^a-zA-Z0-9-_]/g,"-");let o=window.localStorage.getItem("bookmark_content_list");const r=JSON.parse(o)||new Array,a=new Date;r.push({name_s:t,list_a:e,date_s:`${a.getFullYear()}-${a.getMonth()+1}-${a.getDate()}`}),window.localStorage.setItem("bookmark_content_list",JSON.stringify(r))},remove__v(e){},select__v(){},dragDrop(e){let t;const o={dragstart:e=>{e.target.classList.add("semi_opac"),t=e.target,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.innerHTML)},dragenter:e=>{e.target.classList.add("drag_over")},dragover:e=>(e.preventDefault(),e.dataTransfer.dropEffect="move",!1),dragleave:e=>{e.target.classList.remove("drag_over")},dragend:t=>{t.target.classList.add("full_opac"),e.forEach((e=>{e.classList.remove("drag_over")}))},drop:e=>(e.stopPropagation(),t!==e.target&&(t.innerHTML=e.target.innerHTML,e.target.innerHTML=e.dataTransfer.getData("text/html")),!1)};for(const t of e)for(method_s of Object.keys(o))t.addEventListener(method_s,o[method_s],!1)},listen__v(){document.querySelector("#bookmark_save").addEventListener("click",(e=>{e.preventDefault(),//!!! do not submit form
BOOK_o.save__v()})),document.querySelector("#bookmark_refresh").addEventListener("click",(e=>{e.preventDefault(),//!!! do not submit form
BOOK_o.cache__v()}))}};BOOK_o.init__v();